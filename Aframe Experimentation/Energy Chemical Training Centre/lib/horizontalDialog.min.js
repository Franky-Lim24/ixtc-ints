(function(m){function g(a){if(l[a])return l[a].exports;var c=l[a]={i:a,l:!1,exports:{}};m[a].call(c.exports,c,c.exports,g);c.l=!0;return c.exports}var l={};g.m=m;g.c=l;g.i=function(a){return a};g.d=function(a,c,f){g.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:f})};g.n=function(a){var c=a&&a.__esModule?function(){return a["default"]}:function(){return a};g.d(c,"a",c);return c};g.o=function(a,c){return Object.prototype.hasOwnProperty.call(a,c)};g.p="";return g(g.s=0)})([function(m,
g,l){if("undefined"===typeof AFRAME)throw Error("Component attempted to register before AFRAME was available.");AFRAME.registerComponent("dialog-popup",{schema:{title:{type:"string","default":"New Dialog"},titleColor:{type:"string","default":"black"},titleFont:{type:"string","default":"assets/raleway.json"},titleWrapCount:{type:"number","default":24},body:{type:"string","default":""},bodyColor:{type:"string","default":"black"},bodyFont:{type:"string","default":"assets/raleway.json"},bodyWrapCount:{type:"number",
"default":30},openOn:{type:"string","default":"mouseenter"},active:{type:"boolean","default":!0},openIconImage:{type:"asset","default":"assets/plus.png"},openIconRadius:{type:"number","default":.3},openIconColor:{type:"string","default":"white"},closeIconImage:{type:"asset","default":""},closeIconRadius:{type:"number","default":.3},closeIconColor:{type:"string","default":"white"},image:{type:"string","default":""},imageWidth:{type:"number","default":3},imageHeight:{type:"number","default":3},dialogBoxWidth:{type:"number",
"default":5},dialogBoxHeight:{type:"number","default":2.5},dialogBoxColor:{type:"string","default":"white"},dialogBoxPadding:{type:"number","default":.2},previousDialog:{type:"string","default":""},multiple:{type:"boolean","default":"false"}},multiple:!0,dialogPlaneEl:null,openIconEl:null,closeIconEl:null,titleEl:null,bodyEl:null,imageEl:null,hasImage:!1,init:function(){this.cameraEl=document.querySelector("[camera]");this.spawnEntities();this.el.emit("loaded")},tick:function(){this.isOpen&&this.positionDialogPlane()},
remove:function(){var a=this.data.openOn;this.openIconEl.removeEventListener(a,this.toggleDialogOpen.bind(this));this.closeIconEl.removeEventListener(a,this.toggleDialogOpen.bind(this))},update:function(){this.generateTitle();this.generateBody();this.generateImage()},generateOpenIcon:function(){var a=this.data,c=a.openIconRadius,f=a.openIconColor,h=a.openIconImage,b=a.previousDialog;a=a.multiple;var e=this.el.getAttribute("id"),d=document.createElement("a-entity"),k=document.createElement("a-entity"),
n=this.el.getAttribute("position");d.setAttribute("id","".concat(this.el.getAttribute("id"),"--open-icon"));d.setAttribute("position",Object.assign({},n));k.setAttribute("position",Object.assign({},n));d.setAttribute("geometry",{primitive:"circle",radius:c});d.classList.add("dialogIcon");a?(k.setAttribute("id","".concat(e,"--pulse-icon")),k.setAttribute("geometry",{primitive:"circle",radius:c+.01}),k.setAttribute("material",{src:"assets/pulse.png",transparent:"true"}),k.classList.add("removePulse"),
c=e.match(/(\d+)/),c="assets/question".concat(c[0],".png"),d.setAttribute("material",{color:f,src:c}),k.setAttribute("animation__scale","property: scale; to: 1.2 1.2 1; loop: true;"),d.classList.add("changeIcon"),b&&(d.classList.add("invis"),k.classList.add("invis"),d.setAttribute("visible","false"),k.setAttribute("visible","false"))):d.setAttribute("material",{color:f,src:h});d.setAttribute("material",{shader:"flat"});k.setAttribute("material",{shader:"flat"});k.setAttribute("look-at","#cam");d.setAttribute("look-at",
"#cam");$(window).on("load",function(){function p(){document.getElementById("".concat(e,"--dialog-plane")).setAttribute("visible","true");document.getElementById("".concat(e,"--open-icon")).setAttribute("visible","false")}d.addEventListener("mouseenter",function(){p()});k.addEventListener("mouseenter",function(){p()})});this.openIconEl=d;return[d,k]},generateCloseIcon:function(){var a=this.data,c=a.closeIconRadius,f=a.closeIconColor,h=a.closeIconImage,b=a.dialogBoxWidth,e=a.dialogBoxHeight;a=a.openOn;
var d=document.createElement("a-entity");d.setAttribute("id","".concat(this.el.getAttribute("id"),"--close-icon"));d.setAttribute("position",{x:b/2,y:e/2,z:.01});d.setAttribute("geometry",{primitive:"circle",radius:c});d.setAttribute("material",{color:f,src:h});d.addEventListener(a,this.toggleDialogOpen.bind(this));return this.closeIconEl=d},generateTitle:function(){var a=this.data,c=a.title,f=a.titleFont,h=a.body;a=a.multiple;var b=this.titleEl||document.createElement("a-entity");b.setAttribute("id",
"".concat(this.el.getAttribute("id"),"--title"));b.setAttribute("text",{value:c,color:"#456ab7",align:"center",font:f,letterSpacing:-2,wrapCount:16,width:2,shader:"msdf",baseline:"top",anchor:"center"});b.setAttribute("geometry","primitive: plane; width: auto; height: auto; ");a&&b.classList.add("clickTitle");b.setAttribute("material","color: purple;visible:false;");""==h?b.setAttribute("position",{x:1.16,y:0,z:.01}):b.setAttribute("position",{x:1.16,y:.8,z:.01});return this.titleEl=b},generateBody:function(){var a=
this.data,c=a.body,f=a.bodyColor,h=a.bodyFont;a=a.multiple;var b=this.bodyEl||document.createElement("a-entity");b.setAttribute("id","".concat(this.el.getAttribute("id"),"--body"));b.setAttribute("text",{value:c,color:f,font:h,wrapCount:40,shader:"msdf",width:2.3,baseline:"center",anchor:"center"});a&&b.classList.add("clickBody");b.setAttribute("position",{x:1.2,y:-.1,z:.01});return this.bodyEl=b},generateImage:function(){var a=this.data,c=a.image,f=a.imageWidth,h=a.imageHeight;a=a.multiple;if(!c.length)return null;
var b=document.createElement("a-rounded");b.setAttribute("position","-0.14 -1.14 0.001");b.setAttribute("rounded",{height:2.3,width:2.5});b.setAttribute("material",{shader:"flat"});var e=this.imageEl||document.createElement("a-rounded"),d=this.el.getAttribute("id").match(/(\d+)/);e.setAttribute("rounded","radius: 0.05");a&&(e.setAttribute("order",d[0]),e.classList.add("ansOrder"),b.classList.add("clickPlane"));e.setAttribute("id","".concat(this.el.getAttribute("id"),"--image"));e.setAttribute("material",
{src:c,height:h,width:f,shader:"flat"});e.setAttribute("scale","2.31 2.31 1");e.setAttribute("width","1");e.setAttribute("height","1");e.setAttribute("position",{x:-2.37,y:-1.15,z:.02});this.hasImage=!0;this.imageEl=e;return[e,b]},generateDialogPlane:function(){var a=this.data,c=a.dialogBoxWidth,f=a.dialogBoxHeight,h=a.dialogBoxPadding;a=a.dialogBoxColor;var b=this.dialogPlaneEl||document.createElement("a-entity"),e=this.el.getAttribute("id");b.setAttribute("id","".concat(this.el.getAttribute("id"),
"--dialog-plane"));b.setAttribute("look-at","#cam");b.setAttribute("position",Object.assign({},this.el.getAttribute("position")));b.setAttribute("visible",!1);b.setAttribute("geometry",{primitive:"plane",width:c+h,height:f+h});if(c=this.generateImage())b.appendChild(c[0]),b.appendChild(c[1]);b.setAttribute("material",{color:a,src:"assets/infoDialog.png",transparent:!0,opacity:"0.5"});b.appendChild(this.generateTitle());b.appendChild(this.generateBody());document.getElementById("skybox").addEventListener("mouseenter",
function(){var d=document.getElementById("".concat(e,"--open-icon"));d.classList.contains("invis")||(document.getElementById("".concat(e,"--dialog-plane")).setAttribute("visible","false"),d.setAttribute("visible","true"));(d=document.getElementById("".concat(e,"--pulse-icon")))&&(d.classList.contains("invis")||d.setAttribute("visible","true"))});return this.dialogPlaneEl=b},positionDialogPlane:function(){if(this.dialogPlaneEl){var a=this.dialogPlaneEl.object3D.parent.worldToLocal(this.cameraEl.object3D.getWorldPosition());
this.dialogPlaneEl.object3D.lookAt(a)}},spawnEntities:function(){var a=this.generateOpenIcon();this.el.appendChild(a[0]);this.el.appendChild(a[1]);this.el.appendChild(this.generateDialogPlane());this.el.removeAttribute("position")}})}]);